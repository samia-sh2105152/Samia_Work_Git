<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User settings Page</title>
    <link rel="stylesheet" href="/css/user.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

    <div class="container">
        <div class="leftbox">
            <nav>
                <a onclick="tabs(0)" class="tab active">
                    <i class="fa-solid fa-user"></i>
                </a>
                <a onclick="tabs(1)" class="tab">
                    <i class="fa-regular fa-credit-card"></i>
                </a>
                <a onclick="tabs(2)" class="tab">
                    <i class="fa-solid fa-tv"></i>
                </a>
                <a onclick="tabs(3)" class="tab">
                    <i class="fa-solid fa-list-check"></i>
                </a>
                <a onclick="tabs(4)" class="tab">
                    <i class="fa-solid fa-gear"></i>
                </a>
            </nav>
        </div>
        <div class="rightbox">
            <div class="profile tabShow">
                <h1>Personal Information</h1>
                <h2>Full Name</h2>
                <input type="text" class="input" value="" id="fullName">
                <h2>Username</h2>
                <input type="text" class="input" value="" id="username">
                <h2>Gender</h2>
                <input type="text" class="input" value="" id="gender">
                <h2>Email</h2>
                <input type="text" class="input" value="" id="email">
                <h2>Password</h2>
                <input type="password" class="input" value="" id="pass">
                <div class="btn">Update</div>
            </div>

            <div class="payment tabShow">
                <h1>Payment Information</h1>
                <h2>Payment Method</h2>
                <input type="text" class="input" value="MasterCard - 0202 **** **** 7336">
                <h2>Billing Address</h2>
                <input type="text" class="input" value="803 St, Doha, Zone55">
                <h2>Zip Code</h2>
                <input type="text" class="input" value="12345">
                <h2>Billing Date</h2>
                <input type="text" class="input" value="Mar 29,2024">
                <h2>Balance</h2>
                <input type="text" class="input" value="" id="bal">
                <div class="btn">Update</div>
            </div>

            <div class="subscription tabShow">
                <h1>Subscription Information</h1>
                <h2>Payment Date</h2>
                <p>May 12, 2020</p>
                <h2>Next Charges</h2>
                <p>80.56 QR <span>Includes tax</span></p>
                <h2>Plan</h2>
                <p>Limited Plan</p>
                <h2>Monthly </h2>
                <p>107.99 QR /month</p>
                <div class="btn">Update</div>
            </div>

            <div class="purchase tabShow">
                <h1>Purchase History</h1>
                <div class="purchaseHistory">
                </div>
            </div>

            <div class="settings tabShow">
                <h1>Account Settings</h1>
                <h2>Sync WatchList</h2>
                <p></p>
                <h2>Hold Subscription</h2>
                <p></p>
                <h2>Cancel Subscription</h2>
                <p></p>
                <h2>Your Deevices</h2>
                <p></p>
                <h2>Referrals</h2>
                <p></p>
                <div class="btn">Update</div>
            </div>
        </div>
    </div>
    </div> <div class="back-button-container">
        <a href="/customer_page.html" class="back-button">Back</a>
    </div>




    
    <script src="/js/script.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {

    const userData = JSON.parse(sessionStorage.getItem('loggedInUser'));

    if(userData) {
        console.log(userData.money_balance);
        document.querySelector('#fullName').value = userData.full_name || '';
        document.querySelector('#username').value = userData.username || '';
        document.querySelector('#gender').value = userData.gender || '';
        document.querySelector('#email').value=userData.email || ''
        document.querySelector('#pass').value=userData.password || ''
        document.querySelector('#bal').value= userData.money_balance.toString()  || ''
    }
});
        const tabBtn = document.querySelectorAll(".tab");
        const tab = document.querySelectorAll(".tabShow");

        function tabs(panelIndex) {
            tab.forEach(function(node) {
                node.style.display = "none";
            });
            tab[panelIndex].style.display = "block";
        }

        tabs(0);

    tabBtn.forEach(function(button) {
        button.addEventListener('click', function() {
        tabBtn.forEach(btn => btn.classList.remove('active'));
        this.classList.add('active');
        const index = [...tabBtn].indexOf(this);
        tabs(index);
        });
        displayPurchaseHistory();
    });
    document.addEventListener("DOMContentLoaded", displayPurchaseHistory);


    </script>

    
</body>
</html>